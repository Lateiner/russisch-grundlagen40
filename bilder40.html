<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Russisch: Bild-Wort Zuordnung (Sofort-Feedback)</title>
    <style>
        :root {
            --primary: #2196F3;
            --primary-dark: #1976D2;
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --text-color: #333;
            --success: #4CAF50;
            --error: #F44336;
            --neutral: #e0e0e0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            line-height: 1.5;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: var(--primary-dark);
            margin-bottom: 10px;
        }

        p.instruction {
            color: #666;
            font-size: 1.1rem;
        }

        /* --- Grid Layout f√ºr Karten --- */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: transform 0.2s, border-color 0.2s;
            border: 2px solid transparent;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 12px rgba(0,0,0,0.1);
        }

        .visual {
            font-size: 4rem; /* Gro√üe Emojis als Bildersatz */
            margin-bottom: 10px;
            line-height: 1;
        }

        .context {
            font-weight: bold;
            color: #555;
            margin-bottom: 20px;
            min-height: 3rem; /* Damit Kartenh√∂he gleichm√§√üig bleibt */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
        }

        .option-btn {
            background-color: white;
            border: 2px solid var(--neutral);
            border-radius: 8px;
            padding: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-color);
            font-weight: 500;
        }

        .option-btn:hover {
            background-color: #f9f9f9;
            border-color: #bbb;
        }

        /* Zustand: Ausgew√§hlt (vor Feedback) */
        .option-btn.selected {
            background-color: #e3f2fd;
            border-color: var(--primary);
            color: var(--primary-dark);
            font-weight: bold;
        }

        /* Feedback Zust√§nde */
        .option-btn.correct-feedback {
            background-color: var(--success);
            border-color: var(--success);
            color: white;
        }

        .option-btn.wrong-feedback {
            background-color: var(--error);
            border-color: var(--error);
            color: white;
        }

        /* Karte wird gesperrt, wenn Feedback gegeben wurde */
        .card.locked {
            pointer-events: none;
            opacity: 0.8;
        }

        /* --- Globales Feedback unten --- */
        #feedback-area {
            text-align: center;
            margin-top: 20px;
            margin-bottom: 80px; /* Platz f√ºr Sticky Footer */
            font-weight: bold;
            font-size: 1.2rem;
            min-height: 30px;
        }

        /* --- Steuerleiste --- */
        .controls {
            position: sticky;
            bottom: 20px;
            background-color: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 50px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            max-width: 600px;
            margin: 0 auto;
            backdrop-filter: blur(5px);
            border: 1px solid #eee;
        }

        button.ctrl-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            font-size: 1rem;
            transition: transform 0.1s;
            color: white;
            min-width: 120px;
        }

        button.ctrl-btn:active { transform: scale(0.95); }

        #btn-reset { background-color: #FF9800; }
        #btn-solve { background-color: #9E9E9E; }

        /* Mobile Anpassungen */
        @media (max-width: 600px) {
            .grid { grid-template-columns: 1fr; } /* 1 Spalte auf Handy */
            .controls { 
                width: 90%; 
                bottom: 10px;
                padding: 10px;
            }
            .visual { font-size: 3.5rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Bild-Wort Zuordnung</h1>
        <p class="instruction">Schau dir das Bild und die Situation an und w√§hle das passende Verb. Du bekommst sofortiges Feedback!</p>
    </header>

    <div id="quiz-grid" class="grid">
        <!-- Karten werden per JS generiert -->
    </div>

    <div id="feedback-area"></div>

    <div class="controls">
        <button id="btn-reset" class="ctrl-btn" onclick="resetQuiz()">Zur√ºcksetzen</button>
        <button id="btn-solve" class="ctrl-btn" onclick="showSolution()">L√∂sung</button>
    </div>
</div>

<script>
    // Datenbasis: 12 Aufgaben
    // visuals sind Emojis, context ist der deutsche Text
    const tasks = [
        {
            id: 1,
            visual: "üß±üï≥Ô∏èüî®",
            context: "Ein Loch in der Wand schlie√üen",
            correct: "–∑–∞–¥–µ–ª–∞—Ç—å",
            distractors: ["—Å–¥–µ–ª–∞—Ç—å", "–æ—Ç–¥–µ–ª–∞—Ç—å"]
        },
        {
            id: 2,
            visual: "‚úçÔ∏èüïµÔ∏è‚Äç‚ôÇÔ∏èüìÑ",
            context: "Eine Unterschrift f√§lschen",
            correct: "–ø–æ–¥–¥–µ–ª–∞—Ç—å",
            distractors: ["–ø—Ä–∏–¥–µ–ª–∞—Ç—å", "–Ω–∞–¥–µ–ª–∞—Ç—å"]
        },
        {
            id: 3,
            visual: "üî™üêüüë®‚Äçüç≥",
            context: "Einen Fisch zerlegen / vorbereiten",
            correct: "—Ä–∞–∑–¥–µ–ª–∞—Ç—å",
            distractors: ["–≤–¥–µ–ª–∞—Ç—å", "—É–¥–µ–ª–∞—Ç—å"]
        },
        {
            id: 4,
            visual: "üèÅ‚úÖüòÖ",
            context: "Die Arbeit endlich zu Ende bringen",
            correct: "–¥–æ–¥–µ–ª–∞—Ç—å",
            distractors: ["–ø–æ–¥–µ–ª–∞—Ç—å", "–ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å"]
        },
        {
            id: 5,
            visual: "üëó‚úÇÔ∏èüßµ",
            context: "Ein Kleid √§ndern (weil es nicht passt)",
            correct: "–ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å",
            distractors: ["—Å–¥–µ–ª–∞—Ç—å", "–Ω–∞–¥–µ–ª–∞—Ç—å"]
        },
        {
            id: 6,
            visual: "üö™üîßüñêÔ∏è",
            context: "Einen Griff an den Schrank anbringen",
            correct: "–ø—Ä–∏–¥–µ–ª–∞—Ç—å",
            distractors: ["–ø–æ–¥–¥–µ–ª–∞—Ç—å", "–≤–¥–µ–ª–∞—Ç—å"]
        },
        {
            id: 7,
            visual: "üíçüíé‚ú®",
            context: "Einen Stein in den Ring einarbeiten",
            correct: "–≤–¥–µ–ª–∞—Ç—å",
            distractors: ["—Ä–∞–∑–¥–µ–ª–∞—Ç—å", "–∑–∞–¥–µ–ª–∞—Ç—å"]
        },
        {
            id: 8,
            visual: "ü¶öüòéüó£Ô∏è",
            context: "Angeben / Sich aufspielen",
            correct: "–≤—ã–¥–µ–ª—ã–≤–∞—Ç—å—Å—è",
            distractors: ["–æ—Ç–¥–µ–ª—ã–≤–∞—Ç—å—Å—è", "—Å–¥–µ–ª–∞—Ç—å—Å—è"]
        },
        {
            id: 9,
            visual: "‚òïüëîüò±",
            context: "Das Hemd komplett einsauen (Umg.)",
            correct: "—É–¥–µ–ª–∞—Ç—å",
            distractors: ["–æ—Ç–¥–µ–ª–∞—Ç—å", "–ø–æ–¥–µ–ª–∞—Ç—å"]
        },
        {
            id: 10,
            visual: "üèÉüí®üëã",
            context: "Sich von l√§stigen G√§sten befreien",
            correct: "–æ—Ç–¥–µ–ª–∞—Ç—å—Å—è",
            distractors: ["—Ä–∞–∑–¥–µ–ª–∞—Ç—å—Å—è", "–≤—ã–¥–µ–ª–∞—Ç—å—Å—è"]
        },
        {
            id: 11,
            visual: "üè†üé®üñåÔ∏è",
            context: "Eine Wohnung fertigstellen (Innenausbau)",
            correct: "–æ—Ç–¥–µ–ª–∞—Ç—å",
            distractors: ["–æ–±–¥–µ–ª–∞—Ç—å", "–ø—Ä–∏–¥–µ–ª–∞—Ç—å"]
        },
        {
            id: 12,
            visual: "üç™üß∫üëµ",
            context: "Eine gro√üe Menge (Essen) herstellen",
            correct: "–Ω–∞–¥–µ–ª–∞—Ç—å",
            distractors: ["–∑–∞–¥–µ–ª–∞—Ç—å", "–ø–æ–¥–µ–ª–∞—Ç—å"]
        }
    ];

    const gridElement = document.getElementById('quiz-grid');
    const feedbackElement = document.getElementById('feedback-area');
    let answeredCorrectlyCount = 0; // Z√§hler f√ºr globalen Fortschritt

    // Hilfsfunktion: Array mischen
    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    // Initialisierung der Aufgabenkarten
    function init() {
        gridElement.innerHTML = ''; // Vorherige Karten l√∂schen
        answeredCorrectlyCount = 0; // Z√§hler zur√ºcksetzen
        updateGlobalFeedback(); // Globales Feedback aktualisieren
        
        tasks.forEach(task => {
            let options = [task.correct, ...task.distractors];
            options = shuffle(options);

            const card = document.createElement('div');
            card.className = 'card';
            card.id = `card-${task.id}`;
            card.dataset.correct = task.correct;
            card.dataset.answered = "false"; // Status, ob schon beantwortet

            let html = `
                <div class="visual">${task.visual}</div>
                <div class="context">${task.context}</div>
                <div class="options">
            `;

            options.forEach(opt => {
                html += `<button class="option-btn" onclick="selectOption(${task.id}, '${opt}', this)">${opt}</button>`;
            });

            html += `</div>`;
            card.innerHTML = html;
            gridElement.appendChild(card);
        });
    }

    // Klick-Handler f√ºr Optionen (mit sofortigem Feedback)
    window.selectOption = function(taskId, selectedValue, btnElement) {
        const card = document.getElementById(`card-${taskId}`);
        
        // Wenn die Karte bereits korrekt beantwortet und gesperrt ist, nichts tun
        if (card.classList.contains('locked')) return;

        // Feedback-Klassen von allen Buttons der aktuellen Karte entfernen
        const buttons = card.querySelectorAll('.option-btn');
        buttons.forEach(b => {
            b.classList.remove('selected', 'correct-feedback', 'wrong-feedback');
        });

        // "selected"-Klasse zum geklickten Button hinzuf√ºgen
        btnElement.classList.add('selected');

        // √úberpr√ºfung und Feedback
        if (selectedValue === card.dataset.correct) {
            btnElement.classList.add('correct-feedback');
            card.classList.add('locked'); // Karte sperren, wenn richtig
            card.dataset.answered = "true";
            
            // Nur einmal z√§hlen, wenn es zum ersten Mal richtig beantwortet wurde
            if (!card.dataset.wasCorrect) { // Einmaliger Z√§hler
                answeredCorrectlyCount++;
                card.dataset.wasCorrect = "true";
            }
        } else {
            btnElement.classList.add('wrong-feedback');
            // Bei falscher Antwort wird die Karte nicht gesperrt, damit man es erneut versuchen kann.
            card.dataset.answered = "true"; // Gilt als beantwortet, aber falsch
            card.dataset.wasCorrect = "false"; // Markierung f√ºr Z√§hler
            if (answeredCorrectlyCount > 0 && card.dataset.wasCorrectBefore === "true") {
                // Wenn es vorher richtig war und jetzt falsch, den Z√§hler dekrementieren
                answeredCorrectlyCount--;
            }
        }
        updateGlobalFeedback();
    };

    // Aktualisiert das globale Feedback im Footer
    function updateGlobalFeedback() {
        const totalTasks = tasks.length;
        // Z√§hlen wie viele Fragen aktuell korrekt beantwortet sind (k√∂nnte sich durch mehrfache Versuche √§ndern)
        const currentCorrectCards = document.querySelectorAll('.card[data-was-correct="true"]').length;
        
        feedbackElement.textContent = `Du hast ${currentCorrectCards} von ${totalTasks} Aufgaben richtig gel√∂st.`;
        if (currentCorrectCards === totalTasks) {
            feedbackElement.style.color = "var(--success)";
        } else {
            feedbackElement.style.color = "var(--primary-dark)";
        }
    }

    // Zur√ºcksetzen
    window.resetQuiz = function() {
        const cards = document.querySelectorAll('.card');
        cards.forEach(card => {
            card.classList.remove('locked');
            card.style.border = "2px solid transparent"; // Rahmen zur√ºcksetzen
            delete card.dataset.userChoice; // Benutzerwahl l√∂schen
            card.dataset.answered = "false";
            card.dataset.wasCorrect = "false"; // Z√§hler-Markierung zur√ºcksetzen
            
            const buttons = card.querySelectorAll('.option-btn');
            buttons.forEach(btn => {
                btn.classList.remove('selected', 'correct-feedback', 'wrong-feedback');
            });
        });
        init(); // Alle Aufgabenkarten neu initialisieren und Z√§hler zur√ºcksetzen
    };

    // L√∂sung anzeigen
    window.showSolution = function() {
        const cards = document.querySelectorAll('.card');
        cards.forEach(card => {
            const correctVal = card.dataset.correct;
            const buttons = card.querySelectorAll('.option-btn');
            
            buttons.forEach(btn => {
                // Alle Feedback- und Auswahlklassen entfernen
                btn.classList.remove('selected', 'correct-feedback', 'wrong-feedback');
                
                // Richtiges markieren
                if (btn.textContent === correctVal) {
                    btn.classList.add('correct-feedback'); // Hervorhebung f√ºr L√∂sung
                }
            });
            card.classList.add('locked'); // Karte sperren, wenn L√∂sung gezeigt
        });
        feedbackElement.textContent = "Die L√∂sungen sind markiert.";
        feedbackElement.style.color = "#333";
    };

    // Start
    init();

</script>

</body>
</html>